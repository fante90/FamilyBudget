function _defineProperties(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{p9XQ:function(e,t,l){"use strict";l.r(t);var n=l("8Y7J"),a=function e(){_classCallCheck(this,e)},r=l("pMnS"),i=l("UMKc"),o=l("MKJQ"),u=l("sZkV"),c=l("hrZj"),s=l("aILq"),d=l("qyxE"),h=l("Witw"),b=l("bBk2"),p=l("A1CT"),f=l("MO+k"),g=function(){function e(t,l,n){_classCallCheck(this,e),this.uiService=t,this.appDBService=l,this.utilityService=n,this.chartFilterModel={fromDate:null,toDate:null,dateRange:"YEAR"},this.chartRef=null}return _createClass(e,[{key:"refreshChart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l={entity:d.a.entityName,date:{$gte:this.utilityService.dateToISO(this.chartFilterModel.fromDate),$lte:this.utilityService.dateToISO(this.chartFilterModel.toDate)}};d.a.getEntries(this.appDBService,!1,null,l).then((function(l){var n=l,a=[];if("YEAR"==e.chartFilterModel.dateRange)a=["Ge","Fe","Ma","Ap","Ma","Gi","Lu","Ag","Se","Ot","No","Di"];else if("MONTH"==e.chartFilterModel.dateRange)for(var r=0;r<new Date(e.chartFilterModel.toDate).getDate();r++)a.push(""+(r+1));else a=["Lu","Ma","Me","Gi","Ve","Sa","Do"];var i=[],o=[];n.forEach((function(t){if(o.indexOf(t.id_category)<0){var l={label:t.category.description,backgroundColor:t.category.color,data:[]};a.forEach((function(){l.data.push(0)})),i.push(l),o.push(t.id_category)}var n=o.indexOf(t.id_category),r="P"===t.category.type?1:-1;if("YEAR"==e.chartFilterModel.dateRange){var u=new Date(t.date).getMonth();i[n].data[u]+=t.value*r}else if("MONTH"==e.chartFilterModel.dateRange){var c=new Date(t.date).getDate();i[n].data[c]+=t.value*r}else{var s=new Date(t.date).getDay()-1;s<0&&(s=6),i[n].data[s]+=t.value*r}})),e.chartRef&&e.chartRef.destroy(),e.chartRef=new f.Chart(e.statsChart.nativeElement,{type:"bar",data:{labels:a,datasets:i},options:{legend:{display:!1},tooltips:{mode:"index",intersect:!1},maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{display:!1}}]}}}),t&&t.target.complete()}))}},{key:"dateFilterChanged",value:function(e){this.chartFilterModel.fromDate=e.start.toISOString(),this.chartFilterModel.toDate=e.end.toISOString(),this.chartFilterModel.dateRange=e.range,this.refreshChart()}}]),e}(),v=n.nb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:translucent}"]],data:{}});function y(e){return n.Kb(0,[n.Gb(671088640,1,{statsChart:0}),(e()(),n.pb(1,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),n.pb(2,0,null,null,6,"ion-list",[["mode","ios"]],null,null,null,o.rb,o.x)),n.ob(3,49152,null,0,u.O,[n.h,n.k,n.x],{mode:[0,"mode"]},null),(e()(),n.pb(4,0,null,0,4,"ion-list-header",[],null,null,null,o.qb,o.y)),n.ob(5,49152,null,0,u.P,[n.h,n.k,n.x],null,null),(e()(),n.pb(6,0,null,0,2,"ion-label",[["class","ion-no-margin"]],null,null,null,o.pb,o.w)),n.ob(7,49152,null,0,u.N,[n.h,n.k,n.x],null,null),(e()(),n.Ib(-1,0,["Statistiche"])),(e()(),n.pb(9,0,null,null,1,"app-fb-date-filter-toolbar",[],null,[[null,"changed"]],(function(e,t,l){var n=!0;return"changed"===t&&(n=!1!==e.component.dateFilterChanged(l)&&n),n}),c.b,c.a)),n.ob(10,114688,null,0,s.a,[u.Jb,n.h,n.x],null,{changed:"changed"}),(e()(),n.pb(11,0,null,null,2,"ion-content",[],null,null,null,o.cb,o.j)),n.ob(12,49152,null,0,u.u,[n.h,n.k,n.x],null,null),(e()(),n.pb(13,0,[[1,0],["statsChart",1]],0,0,"canvas",[],null,null,null,null,null))],(function(e,t){e(t,3,0,"ios"),e(t,10,0)}),null)}var M=n.lb("app-stats",g,(function(e){return n.Kb(0,[(e()(),n.pb(0,0,null,null,1,"app-stats",[],null,null,null,y,v)),n.ob(1,49152,null,0,g,[h.a,b.a,p.a],null,null)],null,null)}),{},{},[]),k=l("SVse"),C=l("s7LF"),m=l("iInd"),D=l("0Rqu");l.d(t,"StatsPageModuleNgFactory",(function(){return S}));var S=n.mb(a,[],(function(e){return n.yb([n.zb(512,n.j,n.X,[[8,[r.a,i.a,M]],[3,n.j],n.v]),n.zb(4608,k.m,k.l,[n.s,[2,k.x]]),n.zb(4608,u.c,u.c,[n.x,n.g]),n.zb(4608,u.Eb,u.Eb,[u.c,n.j,n.p]),n.zb(4608,u.Jb,u.Jb,[u.c,n.j,n.p]),n.zb(4608,C.l,C.l,[]),n.zb(1073742336,k.b,k.b,[]),n.zb(1073742336,u.Bb,u.Bb,[]),n.zb(1073742336,C.k,C.k,[]),n.zb(1073742336,C.b,C.b,[]),n.zb(1073742336,m.o,m.o,[[2,m.t],[2,m.m]]),n.zb(1073742336,D.a,D.a,[]),n.zb(1073742336,a,a,[]),n.zb(1024,m.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);