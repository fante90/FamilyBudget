function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function _createClass(l,n,e){return n&&_defineProperties(l.prototype,n),e&&_defineProperties(l,e),l}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8O/c":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J"),u=e("mrSG"),o=e("bBk2"),i=e("Witw"),a=e("A1CT"),r=e("jdXt"),c=e("qyxE"),s=function(){function l(n,e,t){_classCallCheck(this,l),this.appDBService=n,this.uiService=e,this.utilityService=t}return _createClass(l,[{key:"downloadMovModel",value:function(){this.utilityService.download("id_category;type;date;note;value;\n","ImportMovimenti.csv","text/plain")}},{key:"downloadCatModel",value:function(){this.utilityService.download("description;type;color;icon;\n","ImportCategorie.csv","text/plain")}},{key:"importData",value:function(l){this.importType=l,document.getElementById("importFile").click()}},{key:"confImportData",value:function(l){var n=this,e=l.target.files[0];l.target.value=null,e&&this.uiService.presentAlert({header:"Import "+(0===this.importType?"Movimenti":"Categorie"),message:"Sei sicuro di voler procedere?",buttons:[{text:"Annulla",role:"cancel",cssClass:"medium"},{text:"Conferma",handler:function(){n.completeImportData(e)}}]})}},{key:"completeImportData",value:function(l){return u.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e,t,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l){n.next=6;break}return n.next=3,this.uiService.presentAlert({message:"Import in corso..."});case 3:e=n.sent,(t=new FileReader).onload=function(l){return u.a(o,void 0,void 0,regeneratorRuntime.mark((function n(){var t,u,o,i,a,s,b,p,m,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((t=l.target.result.split("\n"))&&t.length>1)){n.next=56;break}u=0,o=0,i=0,a=0;case 3:if(!(t.length>a)){n.next=55;break}if(!(a>0)){n.next=52;break}if(u++,s=t[a].split(";"),0!==this.importType){n.next=31;break}if(!(s.length>=5)){n.next=28;break}return b={_id:null,id_category:r.a.entityName+":"+("00000"+s[0]).slice(-6),type:s[1],date:this.elabDate(s[2]),note:s[3],value:parseFloat(s[4])},(p=new c.a(this.appDBService)).modelToEntity(b),n.next=13,p.valid();case 13:if(!n.sent){n.next=25;break}return n.t0=!1,n.next=17,p.save();case 17:if(n.t1=n.sent,n.t0!==n.t1){n.next=22;break}i++,n.next=23;break;case 22:o++;case 23:n.next=26;break;case 25:i++;case 26:n.next=29;break;case 28:0===s.length||1===s.length&&""===s[0]?u--:i++;case 29:n.next=52;break;case 31:if(!(s.length>=4)){n.next=51;break}return m={_id:null,description:s[0],type:s[1],color:s[2],icon:s[3]},(d=new r.a(this.appDBService)).modelToEntity(m),n.next=36,d.valid();case 36:if(!n.sent){n.next=48;break}return n.t2=!1,n.next=40,d.save();case 40:if(n.t3=n.sent,n.t2!==n.t3){n.next=45;break}i++,n.next=46;break;case 45:o++;case 46:n.next=49;break;case 48:i++;case 49:n.next=52;break;case 51:0===s.length||1===s.length&&""===s[0]?u--:i++;case 52:a++;case 53:n.next=3;break;case 55:e.dismiss(),this.uiService.presentAlert({header:"Import completato",message:"Processati: "+u+"\nValidi: "+o+"\nErrori: "+i,buttons:[{text:"Chiudi",role:"cancel",cssClass:"primary"}]});case 56:case"end":return n.stop()}}),n,this)})))},t.readAsText(l);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"elabDate",value:function(l){var n=l.split("/");return 3===n?new Date(parseInt(n[2],10),parseInt(n[1],10)-1,parseInt(n[0],10)):new Date}}]),l}(),b=function l(){_classCallCheck(this,l)},p=e("pMnS"),m=e("MKJQ"),d=e("sZkV"),k=e("iInd"),h=e("SVse"),v=t.nb({encapsulation:0,styles:[[""]],data:{}});function f(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),t.pb(1,0,null,null,10,"ion-list",[["mode","ios"]],null,null,null,m.eb,m.t)),t.ob(2,49152,null,0,d.N,[t.h,t.k,t.x],{mode:[0,"mode"]},null),(l()(),t.pb(3,0,null,0,8,"ion-list-header",[["class","ion-padding-bottom"]],null,null,null,m.db,m.u)),t.ob(4,49152,null,0,d.O,[t.h,t.k,t.x],null,null),(l()(),t.pb(5,0,null,0,3,"ion-icon",[["class","ion-float-left ion-padding-end"],["color","dark"],["name","chevron-back-outline"],["routerLink","/settings"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t.Bb(l,7).onClick()&&u),"click"===n&&(u=!1!==t.Bb(l,8).onClick(e)&&u),u}),m.W,m.m)),t.ob(6,49152,null,0,d.B,[t.h,t.k,t.x],{color:[0,"color"],name:[1,"name"]},null),t.ob(7,16384,null,0,k.n,[k.m,k.a,[8,null],t.B,t.k],{routerLink:[0,"routerLink"]},null),t.ob(8,737280,null,0,d.Ib,[h.i,d.Db,t.k,k.m,[2,k.n]],null,null),(l()(),t.pb(9,0,null,0,2,"ion-label",[["class","ion-no-margin"]],null,null,null,m.cb,m.s)),t.ob(10,49152,null,0,d.M,[t.h,t.k,t.x],null,null),(l()(),t.Hb(-1,0,[" Importazione dati "])),(l()(),t.pb(12,0,null,null,44,"ion-content",[],null,null,null,m.R,m.h)),t.ob(13,49152,null,0,d.t,[t.h,t.k,t.x],null,null),(l()(),t.pb(14,0,null,0,41,"ion-list",[["lines","full"],["mode","ios"]],null,null,null,m.eb,m.t)),t.ob(15,49152,null,0,d.N,[t.h,t.k,t.x],{lines:[0,"lines"],mode:[1,"mode"]},null),(l()(),t.pb(16,0,null,0,9,"ion-item",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.downloadMovModel()&&t),t}),m.bb,m.o)),t.ob(17,49152,null,0,d.G,[t.h,t.k,t.x],null,null),(l()(),t.pb(18,0,null,0,1,"ion-icon",[["name","download-outline"],["slot","start"]],null,null,null,m.W,m.m)),t.ob(19,49152,null,0,d.B,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.pb(20,0,null,0,5,"ion-label",[],null,null,null,m.cb,m.s)),t.ob(21,49152,null,0,d.M,[t.h,t.k,t.x],null,null),(l()(),t.pb(22,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Scarica modello movimenti"])),(l()(),t.pb(24,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Download modello .csv"])),(l()(),t.pb(26,0,null,0,9,"ion-item",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.importData(0)&&t),t}),m.bb,m.o)),t.ob(27,49152,null,0,d.G,[t.h,t.k,t.x],null,null),(l()(),t.pb(28,0,null,0,1,"ion-icon",[["name","swap-vertical-outline"],["slot","start"]],null,null,null,m.W,m.m)),t.ob(29,49152,null,0,d.B,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.pb(30,0,null,0,5,"ion-label",[],null,null,null,m.cb,m.s)),t.ob(31,49152,null,0,d.M,[t.h,t.k,t.x],null,null),(l()(),t.pb(32,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Importa movimenti"])),(l()(),t.pb(34,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Importa massivamente un elenco di movimenti"])),(l()(),t.pb(36,0,null,0,9,"ion-item",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.downloadCatModel()&&t),t}),m.bb,m.o)),t.ob(37,49152,null,0,d.G,[t.h,t.k,t.x],null,null),(l()(),t.pb(38,0,null,0,1,"ion-icon",[["name","download-outline"],["slot","start"]],null,null,null,m.W,m.m)),t.ob(39,49152,null,0,d.B,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.pb(40,0,null,0,5,"ion-label",[],null,null,null,m.cb,m.s)),t.ob(41,49152,null,0,d.M,[t.h,t.k,t.x],null,null),(l()(),t.pb(42,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Scarica modello categorie"])),(l()(),t.pb(44,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Download modello .csv"])),(l()(),t.pb(46,0,null,0,9,"ion-item",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.importData(1)&&t),t}),m.bb,m.o)),t.ob(47,49152,null,0,d.G,[t.h,t.k,t.x],null,null),(l()(),t.pb(48,0,null,0,1,"ion-icon",[["name","grid-outline"],["slot","start"]],null,null,null,m.W,m.m)),t.ob(49,49152,null,0,d.B,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.pb(50,0,null,0,5,"ion-label",[],null,null,null,m.cb,m.s)),t.ob(51,49152,null,0,d.M,[t.h,t.k,t.x],null,null),(l()(),t.pb(52,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Importa categorie"])),(l()(),t.pb(54,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Importa massivamente un elenco di categorie"])),(l()(),t.pb(56,0,null,0,0,"input",[["accept",".csv"],["id","importFile"],["style","display: none;"],["type","file"]],null,[[null,"change"]],(function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.confImportData(e)&&t),t}),null,null))],(function(l,n){l(n,2,0,"ios"),l(n,6,0,"dark","chevron-back-outline"),l(n,7,0,"/settings"),l(n,8,0),l(n,15,0,"full","ios"),l(n,19,0,"download-outline"),l(n,29,0,"swap-vertical-outline"),l(n,39,0,"download-outline"),l(n,49,0,"grid-outline")}),null)}var x=t.lb("app-import",s,(function(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,1,"app-import",[],null,null,null,f,v)),t.ob(1,49152,null,0,s,[o.a,i.a,a.a],null,null)],null,null)}),{},{},[]),g=e("s7LF");e.d(n,"ImportPageModuleNgFactory",(function(){return y}));var y=t.mb(b,[],(function(l){return t.yb([t.zb(512,t.j,t.X,[[8,[p.a,x]],[3,t.j],t.v]),t.zb(4608,h.m,h.l,[t.s,[2,h.s]]),t.zb(4608,g.l,g.l,[]),t.zb(4608,d.c,d.c,[t.x,t.g]),t.zb(4608,d.Cb,d.Cb,[d.c,t.j,t.p]),t.zb(4608,d.Hb,d.Hb,[d.c,t.j,t.p]),t.zb(1073742336,h.b,h.b,[]),t.zb(1073742336,g.k,g.k,[]),t.zb(1073742336,g.b,g.b,[]),t.zb(1073742336,d.Ab,d.Ab,[]),t.zb(1073742336,k.o,k.o,[[2,k.t],[2,k.m]]),t.zb(1073742336,b,b,[]),t.zb(1024,k.k,(function(){return[[{path:"",component:s}]]}),[])])}))}}]);